# Openbook File System Server Configuration
# ----------------------------------------------------------------------------
#    This is a YAML document. See www.yaml.org for more information
#    about the document format

# authorization methods (list)
# Valid options are: password, vouch
# to disable an authorization method change it's value to false
auth : 
    password : true # if new client knows the password, authorize them
    vouch    : true # an already authorized client may vouch for another client

# if passworth authentication is used, this is the password that the user must 
# supply in order for the client to be register with the file system
password : "fabulous"

# Storage location of server data. This is where the server will store files 
# that it generates for persistence, like the authorized keys file and the
# database of queued messages
dataDir : "${CMAKE_CURRENT_BINARY_DIR}/data"

# Root of the managed file system. This is where files are served from. The 
# openbook file system tree is rooted at the subtree of the real file system
# represented by this path (i.e. may be a symbolic link)
rootDir : "${CMAKE_CURRENT_BINARY_DIR}/root"

# Servers private keyfile. This is the private key that we use to authenticate
# the server with clients. The key must be an RSA key in DER format. You may
# generate such a key using OpenSSL with the following commands:
#
#   $ openssl genrsa -out id_rsa 3072
#   $ openssl pkcs8 -nocrypt -in id_rsa -topk8 -outform DER -out id_rsa.der
privKeyFile : "${CMAKE_CURRENT_BINARY_DIR}/rsa-openssl-priv.der"

# Servers public keyfile. This serves as the server's "identity" and is used to
# verify that the client is connecting to the correct server. The key must be
# an RSA key in DER format. You may generate such a key using OpenSSL with the
# following commands:
#
#   $ openssl genrsa -out id_rsa 3072
#   $ openssl rsa -in id_rsa -pubout -outform DER -out id_rsa_pub.der
pubKeyFile  : "${CMAKE_CURRENT_BINARY_DIR}/rsa-openssl-pub.der"

# Address family of interface to listen on. Options are AF_INET (IPv4) or 
# AF_INET6 (IPv6), or AF_UNSPEC to pick any one which matches the following
# criteria
addressFamily : AF_INET

# Interface to bind when listening. This is the IP address that clients may
# reach the server at. You may enter a IPv4 (xxx.xxx.xxx.xxx) or IPv6 
# (xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx) address, a hostname 
# (obfs.openbk.net), or the string "any" to listen on any available interface
iface : any 

# Listen port. This is the tcp/ip port number the server will listen on. 
port : 3031

# Size of the connection pool. This is the maximum number of client connections
# that are allowed. Note that this is not the same as the maximum number of
# clients because each client may be configured to use multiple connections. 
# For instance if maxConn is set to 20, it will be able to server no more than
# four clients if each client keeps 5 connections. However, in the current
# implementation there is one client per mount-point... so if you only mount
# to one directory it will only use one client slot on the server
maxConn : 10

# Size of the worker pool. The worker pool does work. Work is usually rather
# short so this doesn't have to be too large.
maxWorkers : 20


